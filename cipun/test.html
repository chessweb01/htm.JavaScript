<script src="./util.js"></script>
<script src="./webtoolkit.md5.js"></script>
<script src="../nupic.util/Deque.js"></script>

<script>

var bH = new Map();
var key = HashCode.value(new Array([1, 2, 3, 4]));
bH.set(key, "OK");
key = HashCode.value(new Array([1, 2, 3, 4]));
console.log(bH.get(key));

console.log(bH.set([1,2], "KO"));
console.log(bH.get([1,2]));

var Encoder = function() {
	this.n = 0;
};

Encoder.prototype.setN = function(n) {	
	this.n = n;
};
	
Encoder.prototype.getN = function() {
	return this.n;
};
	
/**
 * Base class for {@link Encoder} builders
 * @param <T>
 */
Encoder.prototype.Builder = function() {};

//Encoder.prototype.encoder = null;
//Encoder.prototype.Builder.prototype.encoder = null;

Encoder.prototype.Builder.build = function() {

	if (isNullOrUndefined(this.encoder)) {
		throw new Error("Subclass did not instantiate builder type " +
			"before calling this method!");
	}
	this.encoder.setN(this.n);
		
	return this.encoder;
};

Encoder.prototype.Builder.n = function(n) {
	this.n = n;
	return this;
};

///////////////////////////////////////////////////////////

var ScalarEncoder = function() {
	Encoder.call(this);
};
	
ScalarEncoder.prototype = Object.create(Encoder.prototype);
ScalarEncoder.prototype.constructor = ScalarEncoder;

ScalarEncoder.prototype.builder = function() {	
	return new ScalarEncoder.prototype.Builder();
};

ScalarEncoder.prototype.init = function() {	
	this.setN(this.getN() + 1);
};

/**
 * Returns a {@link EncoderBuilder} for constructing {@link ScalarEncoder}s
 *
 * The base class architecture is put together in such a way where boilerplate
 * initialization can be kept to a minimum for implementing subclasses, while avoiding
 * the mistake-proneness of extremely long argument lists.
 *
 * @see ScalarEncoder.Builder#setStuff(int)
 */
ScalarEncoder.prototype.Builder = function() {
	Encoder.prototype.Builder.call(this);

	this.build = function() {
		//Must be instantiated so that super class can initialize
		//boilerplate variables.
		this.encoder = new ScalarEncoder();
		
		//Call super class here
		Encoder.prototype.Builder.build.call(this);
		
		////////////////////////////////////////////////////////
		//  Implementing classes would do setting of specific //
		//  vars here together with any sanity checking       //
		////////////////////////////////////////////////////////

		this.encoder.init();
		return this.encoder;
	}
};

ScalarEncoder.prototype.Builder.prototype = Object.create(Encoder.prototype.Builder);
ScalarEncoder.prototype.Builder.constructor = ScalarEncoder.prototype.Builder;

///////////////////////////////////////////////////////////

var QuickTest = function() {};

QuickTest.prototype = {
	main: function() {
		var dayBuilder = ScalarEncoder.prototype.builder().n(8);
		var encoder = dayBuilder.build();		
	}
};

var qt = new QuickTest();
qt.main();

</script>